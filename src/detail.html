<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,,maximum-scale=1.0,user-scalable=0">
    <title>详情页</title>
    <meta name="description" content="饭总，京房字，北京拆哪等知名房产大V联合推荐！全国值得信赖的买房指导平台，为买新房、二手房及投资房产的用户提供一对一买房建议或购房咨询" />
    <meta name="keywords" content="V房，V房网，房产大V，饭总选房，北京买房，购房买房，房产资讯，北京房产" />
    <link rel="stylesheet" href="./css/style.css">
    <script src="./assets/jquery.min.js"></script>
    <script src="./assets/flexible.debug.js"></script>
    <script src="./assets/iconfont/iconfont.js"></script>
    <script src="./assets/util.js"></script>
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script> 
</head>

<body>
    <div class="body-layout" style="width: 100%" id="app">
        <div class="hidid" >2676</div>
        <div>
            <header class="top-header">
                <a class="header-left" @click="backToHome"></a>
                <article class="header-middle">详情页</article>
            </header>
            <!-- <div class="top-header-seize" style="width:100%;height:1.17333rem;line-height:1.17333rem;">
            </div> -->
        </div>
        <!-- 详情 -->
        <div class="vf-detail">
            <div class="vf-detail_container">
                <!-- 头部内容 -->
                <div class="vf-detail_container__header">
                    <h1 class="title" style="-webkit-box-orient:vertical;" v-if="viewDetail.view_title">{{viewDetail.view_title}}</h1>
                    <div class="header-info">
                        <div class="dvhead">
                            <img src="./images/default_user_img.png" v-if="!author.author_avatar" />
                            <img :src="author.author_avatar+'?x-oss-process=image/resize,m_fill,h_200,w_200,limit_0'" alt="" v-else>
                        </div>
                        <div class="header-info_text">
                            <span @click="goLargeVipDetail">
                                <img src="./images/icon-v.png" alt="" v-if="false">{{viewDetail.author_name}}
                            </span>
                            <span v-if="viewDetail.publish_time">{{publishTime}}</span>
                        </div>
                        <div v-if="showFollow">
                            <div class="header-info_btn already-concern" @click.stop="postFollow" v-if="isFollow">
                                <a href="javascript:;">已关注</a>
                            </div>
                            <div class="header-info_btn" @click.stop="postFollow" v-else>
                                <a href="javascript:;">
                                    <i></i>关注</a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 文章内容 -->
                <div class="vf-detail_container__main" v-html="view_content" ref="viewContent">
                </div>

                <!--点赞 -->
                <div class="btn-digg">
                    <a v-if="!isDigg" class="border" href="javascript:;"  @click="postLike(2)">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-thumbs-up"></use>
                        </svg>
                        <p v-if="likeAmount"> {{likeAmount > 0 ? (likeAmount > 99 ? "99+" : likeAmount) : ""}}</p>
                    </a>
                    <a v-if="isDigg" class="btn-digg-on border" href="javascript:;"  @click="postLike(2)">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-thumbs-up-color1"></use>
                        </svg>
                        <p v-if="likeAmount"> {{likeAmount > 0 ? (likeAmount > 99 ? "99+" : likeAmount) : ""}}</p>
                    </a>
                </div>

                <div class="vf_con_footinfo">
                    <ul class="taglist" v-if="viewDetail.label&&viewDetail.label.length>0">
                        <li v-for="(item,index) in viewDetail.label.split(',')" :key="index" class="tagitem" @click="goSearchPage(item)">{{item}}</li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- 大V关注信息 -->
        <div class="V-info" @click="goLargeVipDetail" >
            <div class="V-info_content">
                <div class="V-pic">
                    <img src="./images/default_user_img.png" v-if="!author.author_avatar" />
                    <img :src="author.author_avatar+'?x-oss-process=image/resize,m_fill,h_200,w_200,limit_0'" alt="" v-else>
                </div>
                <div class="V-info">
                    <div class="header-info">
                        <div class="header-info_text">
                            <span class="author_name">
                                {{author.author_name}}
                            </span>
                        </div>
                        <div v-if="showFollow">
                            <div class="header-info_btn already-concern" @click.stop="postFollow" v-if="isFollow">
                                <a href="javascript:;">已关注</a>
                            </div>
                            <div class="header-info_btn" @click.stop="postFollow"  v-else>
                                <a href="javascript:;">
                                    <i></i>关注</a>
                            </div>
                        </div>
                    </div>
                    <p v-if="author.desc">
                        <span style="-webkit-box-orient:vertical;">{{author.desc}}</span>
                    </p>
                    <p v-else>
                        <span style="-webkit-box-orient:vertical;">初来乍到，还没来得及介绍自己</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="vf-detail" style="padding-bottom: 50px;">
            <div class="vf-detail_container cancel-padding">
                <!-- 其他大V观点 -->
                <div class="vf-detail_container__otherV " v-if="recommendList&&recommendList.length>0">
                    <h3 class="title">其他V房大V观点</h3>
                    <ul>
                        <li v-for="(item, index) in recommendList" :key="index" @click="goDetail(item.view_id)">
                            <a href="javascript:;" v-if="item.view_title">{{item.view_title}}</a>
                        </li>
                    </ul>
                </div>
                <!-- 评价列表 -->
                <div id="comment-list">
                    <div class="vf-detail_container__evaulate">
                        <h3 class="title">热门评论</h3>

                        <div class="comm-none" v-if="!commentList.comment_list">
                            暂无用户发表评论，
                            <a href="javascript:;" @click="clickComment" >抢沙发</a>
                        </div>  

                        <div class="evaulate-list" v-if="commentList.comment_list" v-for="(item, index) in commentList.comment_list" :key="index">
                            <div class="pic">
                                <img :src="!item.user_avatar?'./images/default_user_img.png':item.user_avatar">
                            </div>
                            <div class="info">
                                <div class="info-content">
                                    <p v-if="item.user_name">{{item.user_name}}</p>
                                    <p v-if="item.content" @click="showReplayInput(item.comment_id)">{{item.content}}</p>
                                    <div class="detail clearfix">
                                        <span class="times">{{item.publish_time}}</span>

                                        <!--评论点赞-->
                                        <span class="nums" @click="postCommentLike(item.comment_id, item.is_like)" >
                                            <svg class="icon on" aria-hidden="true" v-if="item.is_like">
                                                <use xlink:href="#icon-thumbs-up-color1"></use>
                                            </svg>
                                            <svg class="icon" aria-hidden="true" v-else>
                                                <use xlink:href="#icon-thumbs-up"></use>
                                            </svg>{{item.like_amount > 99 ? "99+" : item.like_amount + ""}}
                                        </span>
                                        <!--回复评论按钮-->
                                        <span class="message" @click="showReplayInput(item.comment_id)">
                                            <svg class="icon" aria-hidden="true">
                                                <use xlink:href="#icon-message-square"></use>
                                            </svg>
                                            {{item.reply.length > 99 ? "99+" : item.reply.length + ""}}
                                            <i v-if="item.reply&&item.reply.length>0 || item.showReplay"></i>
                                        </span>
                                    </div>

                                    <div class="return-message" v-if="item.reply&&item.reply.length>0">
                                        <!--回复列表-->
                                        <div class="return-message_list" v-for="(relayItem,i) in item.reply" :key="i">
                                            <em>{{relayItem.user_name}}：</em>
                                            <em @click="showReplayInput(relayItem.reply_id)">{{relayItem.contentFmt}}</em>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- 加载更多 -->
            <article class="vf-bottom-tps">
                <div class="vf-bottom-tps_line" v-show="bottomText.length>0">
                    <span>{{bottomText}}</span>
                </div>
            </article>
        </div>
        <!-- 底部 -->
        <div class="detail-footer border-top">
            <div class="detail-footer_left" @click="clickComment" >
                写评论...
            </div>
            <div class="detail-footer_right">
                <!--底部评论总数量 -->
                <a onclick="javascript:document.getElementById('comment-list').scrollIntoView()" >
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-message-square"></use>
                    </svg>
                    <p v-if="commentList.total_count">
                        {{commentList.total_count > 99 ? "99+" : commentList.total_count + ""}}</p>
                </a>
                <!--新增底部点赞 -->
                <a href="javascript:;" @click="postCollect(1)">
                    <svg class="icon" aria-hidden="true" v-if="!isCollect">
                        <use xlink:href="#icon-star"></use>
                    </svg>
                    <svg class="icon" aria-hidden="true" v-if="isCollect">
                        <use xlink:href="#icon-star-color"></use>
                    </svg>
                </a>
            </div>
        </div>


        <!--新增评论 弹窗-->
        <!-- <div class="mask mask-black" @click="cancelComment" :style="{display:showCommentLayer?'block':'none' }"></div>
        <div class="evaluate-modal" :style="{display:showCommentLayer?'block':'none'} ">
            <div class="vf-evaluate">
                <textarea class="textarea" ref="ta_commnetContent" placeholder="有话要说..." maxlength="500" v-model.trim="commentContent"></textarea>
                <button type="button" class="phone-btn" @click="submitComment">提 交</button>
            </div>
        </div> -->

        <!--新增回复弹窗 -->
        <!-- <div class="mask mask-black" @click="cancelComment" :style="{display:showReplyLayer?'block':'none' }"></div>
        <div class="evaluate-modal" :style="{display:showReplyLayer?'block':'none'} ">
            <div class="vf-evaluate">
                <textarea class="textarea" ref="ta_replyContent" :placeholder="'回复 '+replyingComment.user_name" maxlength="500" v-model.trim="replyContent"></textarea>
                <button type="button" class="phone-btn" @click="postCommentReply">提 交</button>
            </div>
        </div> -->

        <!-- 新增浮动按钮 -->
        <div class="floatBtnToHome" @click="backToHome">
            <img src="./images/icon_tohome_btn.png">
        </div>

        <!-- 正在努力加载中 -->
        <div class="loadingContainer" v-show="coverdivState">
            <div class="loader">
                <img src="./images/c-loading.svg">
                <div class="msgText">正在努力加载中</div>
            </div>
        </div>

        <!--登录弹窗-->
        <div class="loginboxWrap" v-show="loginWrapState">
            <div class="loginbox">
                请先登录
            </div>
        </div>
    </div>
    <script src="./js/detail.js"></script>
</body>

</html>